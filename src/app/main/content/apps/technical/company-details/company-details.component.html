<div class="page-layout simple fullwidth" fxLayout="column" fusePerfectScrollbar>
	<!-- HEADER -->
	<div class="header mat-accent-bg p-24 h-100" fxLayout="row" fxLayoutAlign="start center">
		<div fxLayout="column" fxLayoutAlign="center start">
			<div class="h1 mt-16">Technician Company update</div>
		</div>
	</div>
	<!-- {{company.CompanyID}} -->
	<!-- / HEADER -->
	<form [formGroup]="myGroup">
		<!-- <div *ngIf="company== undefined"><h1>No Data Found!!</h1></div> -->
		<div class="mat-elevation-z4 p-20 m-20" *ngIf="company!== undefined">
			<div fxLayout="row" style="width: 100%">
				<div fxLayout="column" style="width: 100%;">
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style = "display: none;">
							<input matInput placeholder="Status" [(ngModel)]="company.Status" formControlName="Status">
						</mat-form-field>
					</div>
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="Company*" [(ngModel)]="company.Company" formControlName="Company" pattern="[^\s]+[a-zA-Z0-9]+[^]*">
							<mat-error *ngIf="myGroup.get('Company').hasError('required')">Please enter a Company Name.
							</mat-error>
							<mat-error *ngIf="myGroup.get('Company').hasError('pattern')">
								Please enter a valid Company Name.
							</mat-error>
						</mat-form-field>

						<mat-form-field class="example-full-width">
							<input matInput placeholder="Contact" [(ngModel)]="company.Contact" formControlName="Contact">
						</mat-form-field>
					</div>
					<!-- <mat-form-field class="example-full-width">
						<textarea matInput placeholder="Model" [(ngModel)]="company.Model" formControlName=""></textarea>
					  </mat-form-field> -->

					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="Address1" [(ngModel)]="company.Address1" formControlName="Address1">
						</mat-form-field>
						<mat-form-field class="example-full-width">
							<input matInput placeholder="Address2" [(ngModel)]="company.Address2" formControlName="Address2">
						</mat-form-field>
					</div>
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="City" [(ngModel)]="company.City" formControlName="City">
						</mat-form-field>
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="State" [(ngModel)]="company.State" formControlName="State">
						</mat-form-field>
						<mat-form-field class="example-full-width">
							<input matInput placeholder="Zip" [(ngModel)]="company.Zip" formControlName="Zip" >
						</mat-form-field>
					</div>
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="Cell" [(ngModel)]="company.Cell" formControlName="Cell" maxlength="30">
						</mat-form-field>
						<mat-form-field class="example-full-width" style = "display: none;">
							<input matInput placeholder="UDF1" [(ngModel)]="company.udf1" formControlName="udf1">
							<mat-error *ngIf="myGroup.get('udf1').hasError('pattern')||myGroup.get('udf1').hasError('minlength') && (myGroup.get('udf1').dirty || myGroup.get('udf1').touched)">
								Please enter a valid UDF1 Number.
							</mat-error>
						</mat-form-field>
					</div>
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="Phone" [(ngModel)]="company.Phone" formControlName="Phone" (keypress) = "phoneNumberVerification_Phone($event.target.value)" maxlength="14">
						</mat-form-field>
						<mat-form-field class="example-full-width" style="margin-right: 10px;">
							<input matInput placeholder="Ext" [(ngModel)]="company.Ext" formControlName="Ext" maxlength="30"  >
						</mat-form-field>
						<mat-form-field class="example-full-width">
							<input matInput placeholder="Email" [(ngModel)]="company.Email" formControlName="Email">
							<mat-error *ngIf="myGroup.get('Email').hasError('pattern') && (myGroup.get('Email').dirty || myGroup.get('Email').touched)">
								Please enter a valid Email ID.
							</mat-error>
						</mat-form-field>
					</div>
					<mat-form-field class="example-full-width">
						<input matInput placeholder="Notes" [(ngModel)]="company.Notes" formControlName="Notes">
					</mat-form-field>
				</div>
			</div>
			<div style = "display: none;">
				<div fxLayout="column" style="width: 100%;margin: 50px 0px;">
					<h1>Insurance</h1>
					<div fxLayout="row">
						<div fxLayout="column" style="width: 50%;margin-right: 20px; ">
							<mat-form-field class="example-full-width">
								<input matInput placeholder="Agency" [(ngModel)]="company.Insurance" formControlName="Insurance">
							</mat-form-field>
							<mat-form-field class="example-full-width">
								<input matInput placeholder="Contact No" [(ngModel)]="company.INSURPHO" formControlName="INSURPHO" maxlength="12">
							</mat-form-field>
							<mat-form-field class="example-full-width">
								<input matInput placeholder="Carrier" [(ngModel)]="company.INSURAGT" formControlName="INSURAGT">
							</mat-form-field>
						</div>
						<div fxLayout="column" style="width: 50%;">
							<mat-form-field class="example-full-width">
								<input matInput placeholder="Policy #" [(ngModel)]="company.Policy" formControlName="Policy">
							</mat-form-field>
							<mat-form-field style="margin-right: 10px;">
								<input matInput [matDatepicker]="picker12" placeholder="Expire" [(ngModel)]="company.INSUREXP" formControlName="INSUREXP">
								<mat-datepicker-toggle matSuffix [for]="picker12"></mat-datepicker-toggle>
								<mat-datepicker #picker12></mat-datepicker>
							</mat-form-field>
							<mat-form-field class="example-full-width">
								<input matInput placeholder="Liability Amount" [(ngModel)]="company.Liability" formControlName="Liability">
								<mat-error *ngIf="myGroup.get('Liability').hasError('pattern') && (myGroup.get('Liability').dirty || myGroup.get('Liability').touched)">
									Please enter a valid Liability.
								</mat-error>
							</mat-form-field>
						</div>
					</div>
	
				</div>
				<div fxLayout="row" style="width: 100%;margin: 50px 20px 50px 0px;">
					<div fxLayout="column" style="width: 100%;">
						<h1>Licenses</h1>
						<div fxLayout="row" style="width: 100%">
							<mat-checkbox style="padding-top: 24px;margin-right: 20px;width: 10%" [(ngModel)]="company.Cert_City" formControlName="Cert_City">City&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</mat-checkbox>
							<mat-form-field class="example-full-width" style="margin-right: 20px;width: 50%">
								<input matInput placeholder="License #" [(ngModel)]="company.CITYLICNUM" formControlName="CITYLICNUM">
							</mat-form-field>
							<mat-form-field style="width: 40%">
								<input matInput [matDatepicker]="picker13" placeholder="Expire" [(ngModel)]="company.LICEXPDATE" formControlName="LICEXPDATE">
								<mat-datepicker-toggle matSuffix [for]="picker13"></mat-datepicker-toggle>
								<mat-datepicker #picker13></mat-datepicker>
							</mat-form-field>
						</div>
						<div fxLayout="row">
							<mat-checkbox style="padding-top: 24px;margin-right: 20px;width: 10%" [(ngModel)]="company.Cert_County" formControlName="Cert_County">County</mat-checkbox>
							<mat-form-field class="example-full-width" style="margin-right: 20px;width: 50%">
								<input matInput placeholder="License #" [(ngModel)]="company.CntyLicNum" formControlName="CntyLicNum">
							</mat-form-field>
							<mat-form-field style="width: 40%">
								<input matInput [matDatepicker]="picker14" placeholder="Expire" [(ngModel)]="company.County_Expire" formControlName="County_Expire">
								<mat-datepicker-toggle matSuffix [for]="picker14"></mat-datepicker-toggle>
								<mat-datepicker #picker14></mat-datepicker>
							</mat-form-field>
						</div>
					</div>
				</div>
				<div fxLayout="column" style="width: 100%;margin: 50px 0px">
					<h1>Last Letter</h1>
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="margin:10px 10px 0px 0px">
							<input matInput placeholder="Letter Name" [ngModel]="company.LastLetterName" formControlName="LastLetterName">
						</mat-form-field>
						<mat-form-field class="example-full-width" style="margin:10px 10px 0px 0px">
							<input matInput [matDatepicker]="picker15" placeholder="Letter Sent" [(ngModel)]="company.LastLetter" formControlName="LastLetter">
							<mat-datepicker-toggle matSuffix [for]="picker15"></mat-datepicker-toggle>
							<mat-datepicker #picker15></mat-datepicker>
						</mat-form-field>
						<!-- <div class="form-hazard-creation-btn">
							<button mat-raised-button color="accent" class="submit-button" >Sent</button>
						</div> -->
					</div>
				</div>
				<div fxLayout="column" style="width: 100%;margin: 50px 0px">
					<h1>Company's Web Login</h1>
					<div fxLayout="row">
						<mat-form-field class="example-full-width" style="width:50%;margin-right: 20px;">
							<input matInput placeholder="User Id" [(ngModel)]="company.CompanyUserID" formControlName="CompanyUserID">
						</mat-form-field>
						<mat-form-field class="example-full-width" style="width:50%;">
							<input matInput placeholder="Password" [(ngModel)]="company.Password" formControlName="Password">
						</mat-form-field>
					</div>
				</div>
	
				<div fxLayout="column" style="width: 100%;margin: 50px 0px;">
					<h1>Certification</h1>
					<div fxLayout="row">
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Test" formControlName="Cert_Test">Test</mat-checkbox>
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Repair" formControlName="Cert_Repair">Repair</mat-checkbox>
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Confine" formControlName="Cert_Confine">Confined Space</mat-checkbox>
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Survey" formControlName="Cert_Survey">Survey</mat-checkbox>
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Land" formControlName="Cert_Land">Landscape</mat-checkbox>
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Install" formControlName="Cert_Install">Installation</mat-checkbox>
						<mat-checkbox style="padding-top: 24px;margin-left: 25px;" [(ngModel)]="company.Cert_Fire" formControlName="Cert_Fire">Fire</mat-checkbox>
					</div>
				</div>
			</div>

			<div fxLayout="column" style="width: 100%;margin: 50px 0px;">
				<h2>Test Kit</h2>
				<div fxLayoutAlign="end center">
					
					<mat-icon _ngcontent-c35="" class="add-hazard-btn secondary-text s-30 mat-icon material-icons" role="img" aria-hidden="true" (click)="addTestKit()">add</mat-icon>
					
				</div>
				<!-- <mat-form-field style="margin-right: 20px;">
                    <input type="text" [(ngModel)]="company.TestKitID" placeholder="Test Kit" aria-label="Number" (keypress)="searchTestkit($event.target.value)" matInput
					formControlName="TestKitID" [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete">
                        <mat-option *ngFor="let item of searchResult" [value]="item.SerialNum">
                            {{ item.SerialNum }}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field> -->
				
				
				<div fxLayout="row" *ngFor="let comp of testKitList; let i=index;">
					<mat-form-field style="margin-right: 20px;width: 50%;">
						<input type="text" [(ngModel)]="comp.id" [ngModelOptions]="{standalone: true}" placeholder="Select Company" aria-label="Number" (keypress)="searchTestkit($event.target.value)" matInput
								[matAutocomplete]="auto">
								<mat-autocomplete #auto="matAutocomplete">
									<mat-option *ngFor="let item of searchResult" value="{{item.SerialNum}}">
										{{ item.SerialNum }} 
									</mat-option>
								</mat-autocomplete>
					  
					</mat-form-field>
					<mat-icon class="add-hazard-btn secondary-text s-30 mat-icon material-icons" role="img" aria-hidden="true" (click)="removeTestKit(i)">remove</mat-icon>
					
				</div>
			</div>
			<div class="form-hazard-creation1">
				<p style="padding-right: 30px;">Last updated: {{company.LastUpdate|date:'MM/dd/yyyy'}}</p>
				<!-- <p style="padding-right: 30px;">By: {{company.LastUpdateBy}}</p> -->
			</div>
			<div class="form-hazard-creation-btn"  fxLayoutAlign="center center">
				<button mat-raised-button color="accent" class="submit-button" [disabled]="myGroup.invalid || !isEditPermission" (click)="onUpdateCompany()">Update</button>
				<button mat-raised-button color="accent" class="delete-button" [disabled]="!isEditPermission" (click)="ondeleteCompany()">Delete</button>
			</div>
		</div>
	</form>
</div>